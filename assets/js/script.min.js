/*!
 * @author: Avi Aminov
 */
/* Todo list with jQuery (very simple code) */

var App=function(){"use strict";var t=[],e="todo-list",a=function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=0;10>a;a++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},s=function(t,e,a){return'<li id="'+t+'" class="task-wrap"><div class="checkbox"> <label> <input class="checkbox-task" type="checkbox" value="" '+(a?"checked":"")+'><apan class="task-text '+(a?"is_checked":"")+'">'+e+' </span> </label>  <button type="button" class="btn btn-default delete-task"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button></div></li>'},i=function(t){localStorage.setItem(e,JSON.stringify(t))},c=function(){return JSON.parse(localStorage.getItem(e))};return{init:function(){c()&&(t=c())},addNewTask:function(e){null==t&&(t=[]),t.push({id:a(),text:e,is_checked:!1}),jQuery("#task-list").html(""),t.forEach(function(t,e){jQuery("#task-list").append(s(t.id,t.text,t.is_checked))}),jQuery("#add-task-input").val(""),i(t)},toggleCheckedTask:function(e){for(var a=0;a<t.length;a++)if(t[a].id==e)return t[a].is_checked=!t[a].is_checked,i(t),!1},toggleDeleteTask:function(e){for(var a=0;a<t.length;a++)if(t[a].id==e)return t.splice(a,1),i(t),!1},getData:function(){return t},updateToDoList:function(){jQuery("#task-list").html(""),t=c(),t&&t.forEach(function(t,e){jQuery("#task-list").append(s(t.id,t.text,t.is_checked))})}}}();App.init(),App.updateToDoList(),jQuery("#add-task-btn").click(function(){var t=jQuery("#add-task-input").val();""!=t&&App.addNewTask(t)}),jQuery("#task-list").on("click",".checkbox-task",function(){var t=jQuery(this),e=t.is(":checked"),a=t.closest(".task-wrap"),s=a.attr("id"),i=a.find(".task-text");i.toggleClass("is_checked",e),App.toggleCheckedTask(s),App.updateToDoList()}),jQuery("#task-list").on("click",".delete-task",function(){var t=jQuery(this),e=(t.is(":checked"),t.closest(".task-wrap")),a=e.attr("id");App.toggleDeleteTask(a),App.updateToDoList()});
